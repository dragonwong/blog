---
layout: post
title: select 在 ie9- 下使用 innerHTML 填充 bug
category: coding
---

<p>html:</p>

<pre class="html"><code>&lt;select id="select"&gt;&lt;/select&gt;</code></pre>

<p>js:</p>

<pre class="javascript"><code>var select = document.getElementById('select'),
	options = [];

for(var j = 1; j &lt;= 6; j++){
    if(j == 3){
        options.push( '&lt;option selected="selected" value="' + j + '"&gt;' + j + '&lt;/option&gt;' );
    }else{
        options.push( '&lt;option value="' + j + '"&gt;' + j + '&lt;/option&gt;' );
    }
};

select.innerHTML = options.join('');</code></pre>

<p>在 ie6 下，第一个 <code>option</code> 标签会被吞掉，如下图：</p>

<p><img src="http://pic.yupoo.com/dragonwong/E8zzBl5o/medish.jpg" alt="select innerHTML in ie6"></p>

<p>在 ie7-9 下，所有 <code>option</code> 标签都会被吞掉，所以 <code>select.innerHTML</code> 会变成 <code>123456</code>。我也是醉了。</p>

<p>针对泯灭人性的 ie，只能使用 <code>outerHTML</code>，或者对 <code>select</code> 的父元素用 <code>innerHTML</code>。</p>