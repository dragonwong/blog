---
layout: article
title: js中的引用与复制
---
<p>js中基本类型是直接复制，引用类型则复制的是引用。</p>

<p>比如：</p>

<pre><code class='javascript'>var a = {};
//undefined
var b = a;
//undefined
b
//Object {}
b.x = 1;
//1
b
//Object {x: 1}
a
//Object {x: 1}
a = {y: 2};
//Object {y: 2}
b
//Object {x: 1}</code></pre>

<p>可以看到，在对a重新用“=”赋值之前，一切都符合期望，可以是用“=”赋值之后，仿佛切断了b与a原来的引用关系。</p>

<p>数组中也有类似现象：</p>

<pre><code class='javascript'>var a = [];
//undefined
b = a;
//[]
b
//[]
a.push(1);
//1
b
//[1]
a = [2];
//[2]
b
//[1]</code></pre>

<p>prototype也是：</p>

<pre><code class='javascript'>function Person(){}
var friend = new Person();
/*Person.prototype = {
	a: 2
};*/
Person.prototype.a = 1;
console.log(friend.a);</code></pre>

<p>结果输出1，如果去掉注释，结果是undefined。</p>

<hr>

<p>这两天觉得tumblr也挺好的，虽然速度慢了点，但是稳定啊。。纠结要不要搬过去。。</p>