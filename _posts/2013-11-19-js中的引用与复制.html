---
layout: article
title: js中的引用与复制
---
<p>js中基本类型是直接复制，引用类型则复制的是引用。</p>

<p>比如：</p>

<pre><code class="javascript"><span class="keyword">var</span> a = {};
<span class="comment">//undefined</span>
<span class="keyword">var</span> b = a;
<span class="comment">//undefined</span>
b
<span class="comment">//Object {}</span>
b.x = <span class="number">1</span>;
<span class="comment">//1</span>
b
<span class="comment">//Object {x: 1}</span>
a
<span class="comment">//Object {x: 1}</span>
a = {y: <span class="number">2</span>};
<span class="comment">//Object {y: 2}</span>
b
<span class="comment">//Object {x: 1}</span></code></pre>

<p>可以看到，在对a重新用“=”赋值之前，一切都符合期望，可以是用“=”赋值之后，仿佛切断了b与a原来的引用关系。</p>

<p>数组中也有类似现象：</p>

<pre><code class="javascript"><span class="keyword">var</span> a = [];
<span class="comment">//undefined</span>
b = a;
<span class="comment">//[]</span>
b
<span class="comment">//[]</span>
a.push(<span class="number">1</span>);
<span class="comment">//1</span>
b
<span class="comment">//[1]</span>
a = [<span class="number">2</span>];
<span class="comment">//[2]</span>
b
<span class="comment">//[1]</span></code></pre>

<p>prototype也是：</p>

<pre><code class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">()</span>{</span>}
<span class="keyword">var</span> friend = <span class="keyword">new</span> Person();
<span class="comment">/*Person.prototype = {
    a: 2
};*/</span>
Person.prototype.a = <span class="number">1</span>;
console.log(friend.a);</code></pre>

<p>结果输出1，如果去掉注释，结果是undefined。</p>

<hr>

<p>这两天觉得tumblr也挺好的，虽然速度慢了点，但是稳定啊。。纠结要不要搬过去。。</p>